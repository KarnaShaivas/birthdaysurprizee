:root{
  --bg0:#02030a;
  --bg1:#040616;
  --fog:rgba(120,160,170,.10);
  --gold:#ffcc4d;
  --gold2:#ffea9a;
  --red:#ff4d6d;
  --white:#eef5ff;
  --ring:rgba(255,211,110,.65);
  --ring2:rgba(255,102,129,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  background: radial-gradient(1200px 800px at 60% 30%, #09143a 0%, var(--bg1) 40%, var(--bg0) 100%);
  color:var(--white);
  overflow:hidden;
}

.noscript{
  position:fixed;
  inset:0;
  display:grid;
  place-items:center;
  background:#0a0d16;
  color:#fff;
  z-index:9999;
  padding:24px;
  text-align:center;
}

.scene{position:relative;height:100vh;width:100vw;}

.sky{position:absolute;inset:0;overflow:hidden;}

.stars{position:absolute;inset:0;}
.stars .star{
  position:absolute;
  width:2px;
  height:2px;
  background:rgba(255,255,255,.9);
  border-radius:999px;
  opacity:.85;
  filter:drop-shadow(0 0 6px rgba(180,220,255,.45));
  animation:twinkle 4s ease-in-out infinite;
}
.stars .star.big{width:3px;height:3px;opacity:.95}
.stars .star.dim{opacity:.55}

@keyframes twinkle{
  0%,100%{transform:scale(1);opacity:var(--o,.85)}
  50%{transform:scale(1.6);opacity:calc(var(--o,.85) * .45)}
}

.mist{
  position:absolute;
  inset:-20% -10% -10% -10%;
  background:
    radial-gradient(900px 350px at 55% 85%, rgba(120,160,170,.14) 0%, rgba(120,160,170,0) 60%),
    radial-gradient(700px 260px at 20% 88%, rgba(120,160,170,.10) 0%, rgba(120,160,170,0) 65%),
    radial-gradient(800px 300px at 80% 92%, rgba(120,160,170,.12) 0%, rgba(120,160,170,0) 65%);
  filter: blur(6px);
  opacity:.95;
  pointer-events:none;
}

.moon{
  position:absolute;
  width:240px;
  height:240px;
  right:-60px;
  top:-60px;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.38) 0%, rgba(255,255,255,.10) 35%, rgba(255,255,255,0) 70%);
  filter: blur(.2px);
  opacity:.9;
}

.tree-stage{
  position:relative;
  height:100%;
  display:grid;
  place-items:center;
  padding:24px;
}

.tree-wrap{
  position:relative;
  width:min(980px, 96vw);
  height:min(880px, 96vh);
  display:grid;
  place-items:center;
  isolation:isolate;
}

.tree{
  width:100%;
  height:100%;
  max-height:880px;
  display:block;
  filter: drop-shadow(0 30px 90px rgba(0,0,0,.55));
}

.branch{
  fill:none;
  stroke:rgba(120,70,45,.65);
  stroke-width:14;
  stroke-linecap:round;
  stroke-linejoin:round;
  filter: drop-shadow(0 0 10px rgba(20,10,6,.45));
}

.lights .light{transform-origin:center;}
.lights .gold{fill:var(--gold);}
.lights .red{fill:var(--red);}

.lights .light{
  animation: pulse 3.6s ease-in-out infinite;
  filter: drop-shadow(0 0 18px rgba(255,202,80,.55));
}
.lights .light:nth-child(2n){animation-duration:4.4s;animation-delay:.6s}
.lights .light:nth-child(3n){animation-duration:5.2s;animation-delay:1.1s}
.lights .light.red{filter: drop-shadow(0 0 16px rgba(255,77,109,.45));}

@keyframes pulse{
  0%,100%{transform:scale(1);opacity:.85}
  50%{transform:scale(1.35);opacity:1}
}

.orbs-layer{
  position:absolute;
  inset:0;
  pointer-events:auto;
}

.orb{
  position:absolute;
  display:grid;
  place-items:center;
  width:clamp(66px, 8.2vw, 104px);
  aspect-ratio:1/1;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background:
    radial-gradient(circle at 35% 30%, rgba(255,255,255,.30) 0%, rgba(255,255,255,0) 45%),
    radial-gradient(circle at 50% 50%, rgba(255,211,110,.22) 0%, rgba(255,211,110,0) 55%),
    rgba(0,0,0,.22);
  box-shadow:
    0 0 0 3px rgba(255,211,110,.10),
    0 0 28px rgba(255,211,110,.26),
    0 0 55px rgba(255,77,109,.12);
  cursor:pointer;
  padding:0;
  outline:none;
  transition: transform .28s ease, box-shadow .28s ease, filter .28s ease;
  animation: orbFloat 6.5s ease-in-out infinite;
}

.orb::before{
  content:"";
  position:absolute;
  inset:-10px;
  border-radius:999px;
  background: conic-gradient(from 0deg, rgba(255,211,110,.0), rgba(255,211,110,.55), rgba(255,77,109,.25), rgba(255,211,110,.0));
  filter: blur(10px);
  opacity:.75;
  z-index:-1;
}

.orb::after{
  content:"";
  position:absolute;
  width:2px;
  height:70px;
  left:50%;
  top:-64px;
  transform:translateX(-50%);
  background:linear-gradient(to bottom, rgba(255,255,255,.0), rgba(255,220,150,.35), rgba(255,220,150,.0));
  opacity:.55;
  pointer-events:none;
}

@keyframes orbFloat{
  0%,100%{transform:translate(-50%, -50%) translateY(0px)}
  50%{transform:translate(-50%, -50%) translateY(-10px)}
}

.orb:hover,
.orb:focus-visible{
  filter:brightness(1.08) saturate(1.08);
  box-shadow:
    0 0 0 3px rgba(255,211,110,.18),
    0 0 40px rgba(255,211,110,.45),
    0 0 75px rgba(255,77,109,.20);
}

.orb:hover{
  transform:translate(-50%, -50%) translateY(-16px) scale(1.04);
}

.orb img{
  width:82%;
  height:82%;
  object-fit:cover;
  border-radius:999px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.10);
}

.ui{
  position:absolute;
  left:24px;
  bottom:24px;
  display:flex;
  flex-direction:column;
  gap:14px;
  z-index:10;
  max-width:min(520px, 92vw);
}

.title h1{
  margin:0;
  font-size:clamp(22px, 3.4vw, 42px);
  letter-spacing:.2px;
}
.title p{
  margin:6px 0 0;
  opacity:.85;
  line-height:1.35;
}

.music-toggle{
  align-self:flex-start;
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding:10px 14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(0,0,0,.28);
  color:var(--white);
  cursor:pointer;
  backdrop-filter: blur(10px);
  transition: transform .2s ease, background .2s ease, border-color .2s ease;
}
.music-toggle:hover{transform:translateY(-1px);background:rgba(0,0,0,.36);border-color:rgba(255,255,255,.20)}
.music-dot{
  width:10px;
  height:10px;
  border-radius:999px;
  background: radial-gradient(circle at 30% 30%, #fff 0%, var(--gold) 35%, rgba(255,211,110,.0) 70%);
  box-shadow: 0 0 16px rgba(255,211,110,.55);
}

.modal.hidden{display:none}
.modal{position:fixed;inset:0;z-index:60;}
.modal-backdrop{
  position:absolute;inset:0;
  background:rgba(0,0,0,.55);
  backdrop-filter: blur(10px);
}
.modal-card{
  position:relative;
  margin: clamp(18px, 4vh, 44px) auto;
  width:min(880px, 92vw);
  background: linear-gradient(180deg, rgba(10,14,26,.82), rgba(6,8,16,.88));
  border:1px solid rgba(255,255,255,.16);
  border-radius:22px;
  padding:16px 16px 18px;
  box-shadow: 0 30px 120px rgba(0,0,0,.70);
}
.modal-close{
  position:absolute;
  right:10px;
  top:10px;
  width:40px;
  height:40px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.16);
  background:rgba(0,0,0,.25);
  color:#fff;
  cursor:pointer;
  font-size:26px;
  line-height:1;
}
.modal-close:hover{background:rgba(0,0,0,.38)}

.modal-img{
  width:100%;
  height:min(66vh, 560px);
  object-fit:contain;
  border-radius:16px;
  background:rgba(0,0,0,.25);
}
.modal-caption{
  margin:14px 8px 0;
  font-size:clamp(16px, 2.2vw, 20px);
  opacity:.92;
}

@media (max-width:520px){
  .ui{left:14px;bottom:14px}
  .modal-img{height:min(60vh, 520px)}
}
